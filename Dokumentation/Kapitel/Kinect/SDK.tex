\section{Kinect SDK}\label{SDK}
%(Essenz auf der praktischen Anwendung des SKDs -> Methoden, Funktionen)
%
%
%	History des SDKs? -> kinect for windows sdk programming guide%
%
%	Wichtigste Methoden: 
%		C#, u.a. auch wegen Nao
%		Bibliothekseinbindung
%			using Microsoft.Kinect
%			Assemblyverweis
%		Connect/Disconnect -> Tiefenstream & Skeletonstream aktivieren
%		Eventhandling
%
%	Tools die mir zur Verfügung stehen zum Debugging
%		Kinect Studio
%		Samples/Templates
%
%
%Rauminformationen für Software
%Vorteil: Günstig, leicht zu entwickeln, da SDK vorhanden

%Da das Produkt Xbox Kinect bereits vor einigen Jahren auf den Markt kam, hatten die Entwickler Zeit, um ein SDK zu entwickeln, was alle wichtigen Programmfunktionen bereits enthält. Dies macht es einem Entwickler relativ leicht eine Anwendung zu erstellen, die bestimmte Kinect-Funktionen bereitstellt. 
	
\subsection{Timeline}
Nach dem Erscheinen der Kinect-Hardware war diese auch schnell in Entwicklerkreisen gefragt. Microsoft selbst gefiel dies zunächst nicht, denn der Konzern befürchtete, dass Cheater sich an ihren Spielen zu schaffen machen würden und somit den Spielspaß mindern würden. So veröffentlichte Microsoft selbst zunächst kein SDK. Die Open Source Gemeinde jedoch erkannte das Potential des Produktes schnell und entwickelte eine Schnittstelle zu \textit{OpenNI}, einem Framework, das die Auswertung von 3D-Sensordaten verschiedenster Hersteller unterstützt. Dieses Framework bietet somit durch seine Plattformunabhängigkeit die Möglichkeit unterschiedliche Betriebssysteme mit unterschiedlichen 3D-Sensoren zu kombinieren.\cite{webb2012beginning}
Microsoft zog nach und veröffentlichte am 17. Juni 2011 die freie Beta Version des Microsoft SDKs. Somit hatte nun jeder Entwickler freien Zugang zu allen Kinectfunktionen, die auch von Microsoft selbst bisher genutzt wurden. Einer der Vorteile des Kinect SDKs besteht darin, dass die Skelett-Erkennung (Siehe Kapitel \ref{Software} \nameref{Software}) ohne initiale Pose möglich ist, was im Gegensatz zum OpenNI-Framework steht. \cite{webb2012beginning} Da für dieses Projekt die Plattformunabhängigkeit nicht relevant ist, sowohl aber die Skeletterkennung, fiel die Entscheidung auf das Microsoft Kinect SDK.

\subsection{Grundfunktionen}
Anhand des folgenden Listings sollen die grundlegenden Funktion der vorhandenen Bibliotheken und deren Verwendungsweisen verdeutlicht werden:

\lstinputlisting
    [caption={Initialisierung des Kinect Sensors \cite{pdf:maccormick}}
       \label{lst:kinect_sdk},
       captionpos=b]
 {Listings/Kinect_Sample.cs}
\noindent
Zuerst muss die Kinect-Bibliothek in C\# eingebunden werden (Zeile 1). Danach kann ein Sensorobjekt instanziiert werden. Dieses erreicht man über ein Array, da gleichzeitig mehrere Kinect-Systeme per USB angeschlossen und verwendet werden könnten (Zeile 7). Für dieses Projekt wird jedoch nur eine Hardware benötigt und somit handelt es sich immer um das Element mit dem Index 0. Im Anschluss daran wird der Tiefenstream des Sensors aktiviert (Zeile 10) und ein \textit{DepthFrameReady} Event registriert und mit der Methode sensor\_DepthFrameReady (Ab Zeile 21) verknüpft. Diese Methode wird somit bei jeder Aktualisierung der Tiefenwerte aufgerufen und liefert die aktuellen Werte, die in einem Short-Array gespeichert werden. \\ \\
\textbf{Anmerkung}\\
In diesem Listing fehlt die Freigabe von Kinect nach Terminierung der Applikation. Aus diesem Grund
registiert man einen WindowClosing-Listener, der dann die jeweiligen aktivierten Funktionen richtig deaktiviert. Dies ist nicht zwingen nötig, aber wird das Programm beendet, bleibt der IR-Emitter aktiviert und es kann zu Komplikationen führen, wenn das Programm erneut auf die Funktionen zugreifen möchte.

\subsection{Skelettfunktionen}
abc

%\lstinputlisting
%    [caption={Verwendung des Skeleton-Streams}
%       \label{lst:kinect_skeleton},
%       captionpos=b]
%{Listings/Kinect_Sample.cs}
%\noindent

\subsection{Kinect Studio}
Das Kinect-SDK stellt einem Entwickler nach der Installation nützliche Dinge bereit, wie eine Bibliothek mit verschiedenen Templates, die beschreiben wie die Funktionen der Kinect aus Microsoft Sicht verwendet werden. Zusätzlich zu den Templates wird mit dem SDK auch das Kinect Studio mitgeliefert. Diese Anwendung ist für die Entwicklung von Kinect Applikationen sehr nützlich, da man hier wie bei einem Videoschnittprogramm Sequenzen aufnehmen kann, die RGB und Tiefendaten enthalten. Zudem erkennt Kienct Studio aktive Kinect-Applikationen und kann sich zu diesen verbinden. Somit können Bewegungen aufgenommen werden und in der entwickelten Anwendung \textit{abgespielt} werden, ohne diese immer wieder vor der Kinect ausführen zu müssen.
\todo{Screenshot Kinect-Studio}
\\ \\
\textbf{Anmerkung}\\
Das Verbinden funktioniert jedoch nur, wenn Kinect per USB aktuell angeschlossen ist. Deshalb benötigt man zwingend ein Kinect-Modul, um seine Anwendung testen zu können.